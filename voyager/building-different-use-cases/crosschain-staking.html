<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-voyager docs-doc-id-building-different-use-cases/crosschain-staking">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Cross-Chain Staking Contracts using Voyager | Router Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.routerprotocol.com/img/osmosis-docs-card.png"><meta data-rh="true" name="twitter:image" content="https://docs.routerprotocol.com/img/osmosis-docs-card.png"><meta data-rh="true" property="og:url" content="https://docs.routerprotocol.com/voyager/building-different-use-cases/crosschain-staking"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-voyager-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-voyager-current"><meta data-rh="true" property="og:title" content="Cross-Chain Staking Contracts using Voyager | Router Docs"><meta data-rh="true" name="description" content="In this section, we shall create a simple cross-chain staking dapp using the voyager sequencer. We shall follow the instructions provided in the previous section to create the same. It consists of two smart contracts: Vault and Stake."><meta data-rh="true" property="og:description" content="In this section, we shall create a simple cross-chain staking dapp using the voyager sequencer. We shall follow the instructions provided in the previous section to create the same. It consists of two smart contracts: Vault and Stake."><link data-rh="true" rel="icon" href="/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.routerprotocol.com/voyager/building-different-use-cases/crosschain-staking"><link data-rh="true" rel="alternate" href="https://docs.routerprotocol.com/voyager/building-different-use-cases/crosschain-staking" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.routerprotocol.com/voyager/building-different-use-cases/crosschain-staking" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZBN9NGXRCZ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZBN9NGXRCZ",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.bd18b284.css">
<link rel="preload" href="/assets/js/runtime~main.52b8b31d.js" as="script">
<link rel="preload" href="/assets/js/main.78be23a3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logo/light.svg" alt="Router Docs" class="themedImage_ToTc themedImage--light_HNdA" height="26px" width="114px"><img src="/logo/dark.svg" alt="Router Docs" class="themedImage_ToTc themedImage--dark_i4oU" height="26px" width="114px"></div></a><a class="navbar__item navbar__link" href="/overview">Overview</a><a class="navbar__item navbar__link" href="/crosstalk">Develop</a><a class="navbar__item navbar__link" href="/networks">Networks</a><a class="navbar__item navbar__link" href="/validators">Validators</a><a class="navbar__item navbar__link" href="/learn">Learn</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/router-protocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link pseudo-icon github-icon"></a><a href="https://discord.gg/yjM2fUUHvN" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link pseudo-icon discord-icon"></a><a href="https://devnet-router-station.routerprotocol.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link dev-portal-signup dev-portal-link">Launch Router Devnet<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_mhZE"><div class="multiSectionContainer_bYm7"><div class="section_olD1 sectionActive_D9yk" tabindex="0"><div class="label_WInT">Router Protocol</div><div><div class="row_KvCx"><button type="button" role="combobox" aria-controls="" aria-expanded="false" aria-autocomplete="none" aria-label="Select Section" class="sections-menu-trigger"><span style="pointer-events:none"></span><span aria-hidden="true"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" class="sections-menu-scrollButton"><path d="M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></span></button><select aria-hidden="true" tabindex="-1" style="position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal"></select></div></div></div><div class="section_olD1" tabindex="0"><div class="label_WInT">Tooling</div><div><p class="description_C5q3">Tools to simplify building and maintaining dApps using Router.</p></div></div></div><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/voyager">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/voyager/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/voyager/understanding-voyager">Understanding Voyager</a><button aria-label="Toggle the collapsible sidebar category &#x27;Understanding Voyager&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/voyager/building-different-use-cases">Building different use-cases using Voyager</a><button aria-label="Toggle the collapsible sidebar category &#x27;Building different use-cases using Voyager&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voyager/building-different-use-cases/token-transfers">Token Transfer using Voyager Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voyager/building-different-use-cases/sequenced-transfers">Sequenced Transfers (tokens + instructions) using Voyager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/voyager/building-different-use-cases/crosschain-staking">Cross-Chain Staking Contracts using Voyager</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/voyager/fee-model">Fee Model</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/voyager/tools">Tools</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tools&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/voyager/guides/staking-contract">Guides</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Cross-Chain Staking Dapp</h1><p>In this section, we shall create a simple cross-chain staking dapp using the voyager sequencer. We shall follow the instructions provided in the previous section to create the same. It consists of two smart contracts: <strong>Vault</strong> and <strong>Stake</strong>.</p><p><strong>Vault</strong> contract enables the user to first transfer his funds from chain A to chain B and then stake them on chain B.
<strong>Stake</strong> contract manages the staked tokens balance on the destination side. In other words, Stake contract is the fund and state manager of the Vault contract.</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>VAULT CONTRACT</b></summary><div><div class="collapsibleContent_i85q"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-dependencies">Installing the dependencies<a href="#installing-the-dependencies" class="hash-link" aria-label="Direct link to Installing the dependencies" title="Direct link to Installing the dependencies">​</a></h4><p>Install the openzeppelin contracts by running the following command:
<code>yarn add @openzeppelin/contracts</code> or <code>npm install @openzeppelin/contracts</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="instantiating-the-contract">Instantiating the contract<a href="#instantiating-the-contract" class="hash-link" aria-label="Direct link to Instantiating the contract" title="Direct link to Instantiating the contract">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">//SPDX-License-Identifier: Unlicense</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pragma solidity ^0.8.0;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;@openzeppelin/contracts/access/AccessControl.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;./IStake.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">contract Vault is AccessControl {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Import the <code>SafeERC20.sol</code>and <code>AccessControl.sol</code> from <code>@openzeppelin/contracts</code>and <code>IStake.sol</code>.</p><p>Inherit the <code>AccessControl</code> contract into your <code>Vault contract</code>.</p><p>For your information:</p><ol><li><code>IStake.sol</code> is the interface of <code>Stake</code> contract which we need here for defining an instance of staking contract into our <code>Vault</code> contract.</li><li><code>SafeERC20.sol</code> is the contract we shall use to access various functions of ERC20 tokens.</li><li><code>AccessControl.sol</code> is the contract we shall use for putting admin controls over certain important functions.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-state-variables-and-the-constructor">Creating state variables and the constructor<a href="#creating-state-variables-and-the-constructor" class="hash-link" aria-label="Direct link to Creating state variables and the constructor" title="Direct link to Creating state variables and the constructor">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">using SafeERC20 for IERC20;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">IStake public stakingContract;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">address public voyagerDepositHandler;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">address public voyagerExecuteHandler;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">mapping(bytes32 =&gt; address) public ourContractsOnChain;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// depositReserveTokenAndExecute(bool,bool,bytes,bytes,bytes)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">bytes4 public constant DEPOSIT_RESERVE_AND_EXECUTE_SELECTOR = 0xf64d944a;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// depositNonReserveTokenAndExecute(bool,bool,bytes,bytes,bytes)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">bytes4 public constant DEPOSIT_NON_RESERVE_AND_EXECUTE_SELECTOR = 0x79334b17;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// depositLPTokenAndExecute(bool,bytes,bytes,bytes)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">bytes4 public constant DEPOSIT_LP_AND_EXECUTE_SELECTOR = 0xe18cfa35;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">bytes4 public constant STAKE_FUNCTION_SELECTOR =</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bytes4(keccak256(&quot;receiveStakeCrossChain(address,address,uint256)&quot;));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">constructor(address _voyagerDepositHandler, address _voyagerExecuteHandler)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    voyagerDepositHandler = _voyagerDepositHandler;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    voyagerExecuteHandler = _voyagerExecuteHandler;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    _setupRole(DEFAULT_ADMIN_ROLE, msg.sender);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><code>stakingContract</code>: This is the instance of our <code>Stake</code> contract which will manage the state and balance of funds in both kind of transfers: same chain as well as cross-chain.</li><li><code>voyagerDeposithandler</code> &amp; <code>voyagerExecuteHandler</code> : These are the variables created for storing the addresses of Deposit and Execute handlers. We will be using Deposit Handler for calling the voyager that initiates the cross-chain sequenced transfer on the source side using function selectors of <code>voyagerDeposithandler</code> and Execute Handler for validating if the transaction is triggered on the destination side by Execute Handler only.</li><li><code>ourContractsOnChain</code> : This is the mapping that stores the address of the vault contract corresponding to the destination chain Id identifiers which can be found <a href="/voyager/tools/configurations/chain-id-identifiers">here</a>.</li><li><code>DEPOSIT_RESERVE_AND_EXECUTE_SELECTOR, DEPOSIT_NON_RESERVE_AND_EXECUTE_SELECTOR &amp; DEPOSIT_LP_AND_EXECUTE_SELECTOR</code> : These are the selectors of various functions in <code>voyagerDeposithandler</code> which assist us to identify the type of token transfer(whether it is a reserve token, non-reserve token or a LP token).</li><li><code>STAKE_FUNCTION_SELECTOR</code> : This is the selector of the function that is called whenever a cross-chain call is received on the destination chain. This is the function for your reference:</li></ol><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">function receiveStakeCrossChain(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address _user,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address _token,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 _amount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) internal {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        stakingContract.stake(_user, _token, _amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li><code>Constructor</code> : Create the constructor with address of voyagerDepositHandler and voyagerExecuteHandler and set them into our state variables along with giving the <code>DEFAULT_ADMIN_ROLE</code> to the deployer.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-to-set-the-staking-contract">Function to set the Staking contract<a href="#function-to-set-the-staking-contract" class="hash-link" aria-label="Direct link to Function to set the Staking contract" title="Direct link to Function to set the Staking contract">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">function setStakingContract(address _stakingContract)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        external</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        onlyRole(DEFAULT_ADMIN_ROLE)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        stakingContract = IStake(_stakingContract);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Our Vault contract on every chain must know the address of its corresponding Stake contract on same chain to interact with it whenever a cross-chain call is received by Vault. Hence we create a function <code>setStakingContract</code> to store the address of Stake Contract on the same chain.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-to-store-the-addresses-of-vault-contracts-deployed-on-other-chains">Function to store the addresses of Vault contracts deployed on other chains<a href="#function-to-store-the-addresses-of-vault-contracts-deployed-on-other-chains" class="hash-link" aria-label="Direct link to Function to store the addresses of Vault contracts deployed on other chains" title="Direct link to Function to store the addresses of Vault contracts deployed on other chains">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">function setContractsOnChain(bytes32 chainIdBytes, address contractAddr) external onlyRole(DEFAULT_ADMIN_ROLE) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        ourContractsOnChain[chainIdBytes] = contractAddr;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Our Vault contract on every chain must know the addresses of its counterparts on every other chain to enable cross-chain transfers or cross-chain sequenced transfers. Hence we create a function <code>setContractsOnChain</code> that updates the mapping <code>ourContractsOnChain</code> about which we talked about earlier.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-to-approve-stake-contract-to-safely-transfer-funds-from-vault">Function to approve Stake contract to safely transfer funds from Vault<a href="#function-to-approve-stake-contract-to-safely-transfer-funds-from-vault" class="hash-link" aria-label="Direct link to Function to approve Stake contract to safely transfer funds from Vault" title="Direct link to Function to approve Stake contract to safely transfer funds from Vault">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">function approve(address token, address spender, uint256 amount) external onlyRole(DEFAULT_ADMIN_ROLE) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        IERC20(token).approve(spender, amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Whenever a cross-chain transfer happens and funds are received by Vault contract on the destination chain, they are directed to Stake contract after which the staked balance in the name of the user is updated. Vault contract on every chain must approve Stake contract on the same chain to be able to transfer a certain amount of tokens to itself from Vault. Thus we create a function <code>approve</code> to facilitate this.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-to-convert-a-variable-of-type-address-to-type-bytes">*<!-- -->Function to convert a variable of type <code>address</code> to type <code>bytes</code><a href="#function-to-convert-a-variable-of-type-address-to-type-bytes" class="hash-link" aria-label="Direct link to function-to-convert-a-variable-of-type-address-to-type-bytes" title="Direct link to function-to-convert-a-variable-of-type-address-to-type-bytes">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">function toBytes(address addr) internal pure returns (bytes memory b) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        assembly {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            let m := mload(0x40)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            addr := and(addr, 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            mstore(add(m, 20), xor(0x140000000000000000000000000000000000000000, addr))</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            mstore(0x40, add(m, 52))</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            b := m</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>*<!-- -->this is just a supporting function. We shall use it as a converter whenever an address has to be passed as a parameter in the form of bytes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-that-enables-cross-chain-sequenced-transfers">Function that enables cross-chain sequenced transfers<a href="#function-that-enables-cross-chain-sequenced-transfers" class="hash-link" aria-label="Direct link to Function that enables cross-chain sequenced transfers" title="Direct link to Function that enables cross-chain sequenced transfers">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">function stakeCrossChain(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes4 selector,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bool isSourceNative,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bool isAppTokenPayer,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address recipient,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address refundAddress,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 gasLimit,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 gasPrice,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes memory swapData,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes memory executeData</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) public payable {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes32 destChainIdBytes = abi.decode(swapData, (bytes32));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes memory data = abi.encode(recipient);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes memory arbitraryData = abi.encode(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            toBytes(ourContractsOnChain[destChainIdBytes]),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            STAKE_FUNCTION_SELECTOR,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            data,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            toBytes(refundAddress),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            gasLimit,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            gasPrice</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bool success;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        if (selector == DEPOSIT_RESERVE_AND_EXECUTE_SELECTOR || selector == DEPOSIT_NON_RESERVE_AND_EXECUTE_SELECTOR) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            (success, ) = voyagerDepositHandler.call{ value: msg.value }(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                abi.encodeWithSelector(selector, isSourceNative, isAppTokenPayer, swapData, executeData, arbitraryData)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            (success, ) = voyagerDepositHandler.call{ value: msg.value }(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                abi.encodeWithSelector(selector, isAppTokenPayer, swapData, executeData, arbitraryData)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        require(success, &quot;unsuccessful&quot;);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is the <code>stakeCrossChain</code> function that:</p><ol><li>Encodes the data that we need on the destination chain whenever a cross-chain call is received. Here we need the recipient or user address to update the staked balance in user&#x27;s name on destination chain.</li><li>Creates arbitrary instructions by encoding destination chain id identifier, selector of the function that needs to be called on destination chain, data that we encoded in previous step, address to be considered for refund in bytes format, gas limit and gas price.</li><li>Checks the selector for functions contained in Voyager deposit handler and calls it according to the data passed in the parameters.</li></ol><p>Let us understand the parameters of <code>stakeCrossChain</code> function one by one:</p><ol><li><code>selector</code> : This is one of the selectors of various functions in <code>voyagerDeposithandler</code> which assist us to identify the type of token transfer (whether it is a reserve token, non-reserve token or a LP token) This shall be provided to you with the help of an API.</li><li><code>isSourceNative</code> : This is a boolean that should be set true if the source token is native to source chain and false in other case.</li><li><code>isAppTokenPayer</code> : This is a boolean that should be set true if the source contract is going to pay the tokens to the Voyager for transferring it to the destination chain. If you want the signer of the transaction to pay these tokens, set this to false.</li><li><code>recipient</code> : This is the address of the user in whose name the staked balance would be updated on the destination chain.</li><li><code>refundAddress</code> : This is the address to be considered for refund.</li><li><code>gasLimit</code> : This is the gas limit for destination chain</li><li><code>gasPrice</code> : This is the gas price for destination chain</li><li><code>swapData</code> : This is the data required for token transfer on source chain. This shall be provided to you with the help of an API.</li><li><code>executeData</code> : This is the data required for token transfer on destination chain. This shall be provided to you with the help of an API.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-that-receives-the-cross-chain-call-and-executes-the-stake-function-on-destination-chain">Function that receives the cross-chain call and executes the Stake function on destination chain<a href="#function-that-receives-the-cross-chain-call-and-executes-the-stake-function-on-destination-chain" class="hash-link" aria-label="Direct link to Function that receives the cross-chain call and executes the Stake function on destination chain" title="Direct link to Function that receives the cross-chain call and executes the Stake function on destination chain">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">function voyagerReceive(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address sourceSenderAddress,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes32 srcChainIdBytes,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes4 selector,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes memory data,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address settlementToken,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 settlementAmount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) external {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        // Checking if the sender is the voyager execute handler contract</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        require(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            msg.sender == voyagerExecuteHandler,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            &quot;only voyager execute handler&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        // Checking if the request initiated by our contract only from the source chain</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        require(sourceSenderAddress == ourContractsOnChain[srcChainIdBytes], &quot;not our contract&quot;);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        // Checking the selector that was passed from the source chain</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        if (selector == STAKE_FUNCTION_SELECTOR) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // decoding the data we sent from the source chain</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            address user = abi.decode(data, (address));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // calling the stake function</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            receiveStakeCrossChain(user, settlementToken, settlementAmount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is the <code>voyagerReceive</code> function that:</p><ol><li>Requires that the caller of the function is Voyager Execute Handler only.</li><li>Checks if the cross-chain request was initiated from our counterpart on the source chain or not.</li><li>Checks if the selector is of the same function that we need to call on destination chain. Here it is the selector of <code>receiveStakeCrossChain</code> function.</li><li>Decodes the data that we encoded (recipient address) at the time of initiating the cross-chain transfer.</li><li>Calls the <code>receiveStakeCrossChain</code> function with its parameters.</li></ol></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>ISTAKE</b></summary><div><div class="collapsibleContent_i85q"><p>It is the interface for our Stake contract. Find the code snippet below:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">//SPDX-License-Identifier: Unlicense</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pragma solidity ^0.8.0;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">interface IStake {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function stake(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address user,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address token,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 amount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) external;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function unstake(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address user,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address token,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 amount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) external;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>STAKE CONTRACT</b></summary><div><div class="collapsibleContent_i85q"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-dependencies-1">Installing the dependencies<a href="#installing-the-dependencies-1" class="hash-link" aria-label="Direct link to Installing the dependencies" title="Direct link to Installing the dependencies">​</a></h4><p>Install the openzeppelin contracts by running the following command:
<code>yarn add @openzeppelin/contracts</code> or <code>npm install @openzeppelin/contracts</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="instantiating-the-contract-1">Instantiating the contract<a href="#instantiating-the-contract-1" class="hash-link" aria-label="Direct link to Instantiating the contract" title="Direct link to Instantiating the contract">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">//SPDX-License-Identifier: Unlicense</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pragma solidity ^0.8.0;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;@openzeppelin/contracts/utils/math/SafeMath.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;./IStake.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">contract Stake is IStake {}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Import the <code>SafeERC20.sol</code>and <code>SafeMath.sol</code> from <code>@openzeppelin/contracts</code>and <code>IStake.sol</code>.</p><p>Inherit the <code>IStake</code> contract into your <code>Stake contract</code>.</p><p>For your information:</p><ol><li><code>IStake.sol</code> is the interface of <code>Stake</code> contract which we need here for defining an instance of staking contract into our <code>Vault</code> contract.</li><li><code>SafeERC20.sol</code> is the contract we shall use to access various functions of ERC20 tokens.</li><li><code>SafeMath.sol</code> is the wrapper contract over Solidity’s arithmetic operations with added overflow checks.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-state-variables-and-the-constructor-1">Creating State variables and the constructor<a href="#creating-state-variables-and-the-constructor-1" class="hash-link" aria-label="Direct link to Creating State variables and the constructor" title="Direct link to Creating State variables and the constructor">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">    using SafeERC20 for IERC20;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    using SafeMath for uint256;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    address public immutable vault;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // user address =&gt; token address =&gt; staked amount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    mapping(address =&gt; mapping(address =&gt; uint256)) public stakedBalance;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    constructor(address _vault) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        vault = _vault;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li><code>vault</code>: This is the address of our Vault contract on the same chain.</li><li><code>stakedBalance</code> : This is the mapping that stores the amount staked corresponding to the user and token address</li><li><code>constructor</code> : Create the constructor with the address of the Vault contract and store it in the state variable <code>vault</code>.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="modifier-onlyvault">Modifier onlyVault()<a href="#modifier-onlyvault" class="hash-link" aria-label="Direct link to Modifier onlyVault()" title="Direct link to Modifier onlyVault()">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">modifier onlyVault() {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        require(msg.sender == vault, &quot;Only Vault&quot;);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        _;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We shall add this modifier to our main functions <code>stake</code> and <code>unstake</code> because we want only the Vault contract and no other account or contract to interact with Stake.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-to-stake">Function to Stake<a href="#function-to-stake" class="hash-link" aria-label="Direct link to Function to Stake" title="Direct link to Function to Stake">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">function stake(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address user,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address token,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 amount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) external override onlyVault {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 balanceBefore = IERC20(token).balanceOf(address(this));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        IERC20(token).safeTransferFrom(msg.sender, address(this), amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 balanceAfter = IERC20(token).balanceOf(address(this));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 _amount = balanceAfter.sub(balanceBefore, &quot;No amount received&quot;);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        stakedBalance[user][token] += _amount;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This function:</p><ol><li>Checks the balance of token before transferring tokens to itself from Vault.</li><li>Transfers the tokens to itself.</li><li>Checks the balance of token after transferring them.</li><li>Calculates the amount actually staked</li><li>Updates the staked balance for the user.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-to-unstake">Function to Unstake<a href="#function-to-unstake" class="hash-link" aria-label="Direct link to Function to Unstake" title="Direct link to Function to Unstake">​</a></h4><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">function unstake(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address user,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address token,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 amount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) external override onlyVault {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        stakedBalance[user][token] = stakedBalance[user][token].sub(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            amount,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            &quot;User balance too low&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        IERC20(token).safeTransfer(user, amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This function checks the staked balance of the user, subtracts the amount he wants to unstake from it and transfers the amount of tokens back to user.</p><p>This is how we created a simple Cross-chain Staking Dapp using Router&#x27;s Voyager.</p></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b> END-TO-END VAULT CONTRACT</b></summary><div><div class="collapsibleContent_i85q"><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">//SPDX-License-Identifier: Unlicense</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pragma solidity ^0.8.0;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;@openzeppelin/contracts/access/AccessControl.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;./IStake.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">contract Vault is AccessControl {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    using SafeERC20 for IERC20;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    IStake public stakingContract;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    address public voyagerDepositHandler;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    address public voyagerExecuteHandler;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    mapping(bytes32 =&gt; address) public ourContractsOnChain;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // depositReserveTokenAndExecute(bool,bool,bytes,bytes,bytes)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bytes4 public constant DEPOSIT_RESERVE_AND_EXECUTE_SELECTOR = 0xf64d944a;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // depositNonReserveTokenAndExecute(bool,bool,bytes,bytes,bytes)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bytes4 public constant DEPOSIT_NON_RESERVE_AND_EXECUTE_SELECTOR = 0x79334b17;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // depositLPTokenAndExecute(bool,bytes,bytes,bytes)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bytes4 public constant DEPOSIT_LP_AND_EXECUTE_SELECTOR = 0xe18cfa35;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    bytes4 public constant STAKE_FUNCTION_SELECTOR =</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes4(keccak256(&quot;receiveStakeCrossChain(address,address,uint256)&quot;));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    constructor(address _voyagerDepositHandler, address _voyagerExecuteHandler)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        voyagerDepositHandler = _voyagerDepositHandler;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        voyagerExecuteHandler = _voyagerExecuteHandler;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        _setupRole(DEFAULT_ADMIN_ROLE, msg.sender);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function setStakingContract(address _stakingContract)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        external</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        onlyRole(DEFAULT_ADMIN_ROLE)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        stakingContract = IStake(_stakingContract);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function setContractsOnChain(bytes32 chainIdBytes, address contractAddr) external onlyRole(DEFAULT_ADMIN_ROLE) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        ourContractsOnChain[chainIdBytes] = contractAddr;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function stake(uint256 _amount, address _token) external {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        IERC20(_token).safeTransferFrom(msg.sender, address(this), _amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        stakingContract.stake(msg.sender, _token, _amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function unstake(uint256 _amount, address _token) external {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        stakingContract.unstake(msg.sender, _token, _amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function stakeCrossChain(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes4 selector,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bool isSourceNative,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bool isAppTokenPayer,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address recipient,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address refundAddress,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 gasLimit,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 gasPrice,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes memory swapData,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes memory executeData</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) public payable {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes32 destChainIdBytes = abi.decode(swapData, (bytes32));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes memory data = abi.encode(recipient);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes memory arbitraryData = abi.encode(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            toBytes(ourContractsOnChain[destChainIdBytes]),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            STAKE_FUNCTION_SELECTOR,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            data,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            toBytes(refundAddress),</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            gasLimit,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            gasPrice</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bool success;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        if (selector == DEPOSIT_RESERVE_AND_EXECUTE_SELECTOR || selector == DEPOSIT_NON_RESERVE_AND_EXECUTE_SELECTOR) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            (success, ) = voyagerDepositHandler.call{ value: msg.value }(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                abi.encodeWithSelector(selector, isSourceNative, isAppTokenPayer, swapData, executeData, arbitraryData)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            (success, ) = voyagerDepositHandler.call{ value: msg.value }(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                abi.encodeWithSelector(selector, isAppTokenPayer, swapData, executeData, arbitraryData)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        require(success, &quot;unsuccessful&quot;);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function voyagerReceive(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address sourceSenderAddress,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes32 srcChainIdBytes,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes4 selector,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        bytes memory data,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address settlementToken,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 settlementAmount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) external {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        // Checking if the sender is the voyager execute handler contract</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        require(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            msg.sender == voyagerExecuteHandler,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            &quot;only voyager execute handler&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        // Checking if the request initiated by our contract only from the source chain</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        require(sourceSenderAddress == ourContractsOnChain[srcChainIdBytes], &quot;not our contract&quot;);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        // Checking the selector that was passed from the source chain</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        if (selector == STAKE_FUNCTION_SELECTOR) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // decoding the data we sent from the source chain</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            address user = abi.decode(data, (address));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // calling the stake function</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            receiveStakeCrossChain(user, settlementToken, settlementAmount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function receiveStakeCrossChain(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address _user,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address _token,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 _amount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) internal {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        stakingContract.stake(_user, _token, _amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function approve(address token, address spender, uint256 amount) external onlyRole(DEFAULT_ADMIN_ROLE) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        IERC20(token).approve(spender, amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function toBytes(address addr) internal pure returns (bytes memory b) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        assembly {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            let m := mload(0x40)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            addr := and(addr, 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            mstore(add(m, 20), xor(0x140000000000000000000000000000000000000000, addr))</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            mstore(0x40, add(m, 52))</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            b := m</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>END-TO-END STAKE CONTRACT</b></summary><div><div class="collapsibleContent_i85q"><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#1E1E1E"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">//SPDX-License-Identifier: Unlicense</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">pragma solidity ^0.8.0;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;@openzeppelin/contracts/utils/math/SafeMath.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">import &quot;./IStake.sol&quot;;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">contract Stake is IStake {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    using SafeERC20 for IERC20;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    using SafeMath for uint256;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    address public immutable vault;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // user address =&gt; token address =&gt; staked amount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    mapping(address =&gt; mapping(address =&gt; uint256)) public stakedBalance;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    constructor(address _vault) {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        vault = _vault;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    modifier onlyVault() {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        require(msg.sender == vault, &quot;Only Vault&quot;);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        _;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function stake(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address user,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address token,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 amount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) external override onlyVault {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 balanceBefore = IERC20(token).balanceOf(address(this));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        IERC20(token).safeTransferFrom(msg.sender, address(this), amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 balanceAfter = IERC20(token).balanceOf(address(this));</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 _amount = balanceAfter.sub(balanceBefore, &quot;No amount received&quot;);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        stakedBalance[user][token] += _amount;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    function unstake(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address user,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        address token,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        uint256 amount</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ) external override onlyVault {</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        stakedBalance[user][token] = stakedBalance[user][token].sub(</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            amount,</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            &quot;User balance too low&quot;</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        IERC20(token).safeTransfer(user, amount);</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>DEPLOYED CONTRACTS FOR REFERENCE</b></summary><div><div class="collapsibleContent_i85q"><p><strong>Polygon Mumbai Testnet:</strong>
<strong>Vault</strong>: <a href="https://mumbai.polygonscan.com/address/0x92c618b8e726d4645e2614959acd15eec3363076" target="_blank" rel="noopener noreferrer">https://mumbai.polygonscan.com/address/0x92c618b8e726d4645e2614959acd15eec3363076</a></p><p><strong>Stake</strong>: <a href="https://mumbai.polygonscan.com/address/0xd5b007b13ed9ad0dc6cd41714ea71408c66ed28d" target="_blank" rel="noopener noreferrer">https://mumbai.polygonscan.com/address/0xd5b007b13ed9ad0dc6cd41714ea71408c66ed28d</a></p><p><strong>Avalanche Fuji Testnet:</strong>
<strong>Vault</strong>: <a href="https://testnet.snowtrace.io/address/0xB3793af97Ef6BDF7b794F1Ed22B7A8bd056706C7" target="_blank" rel="noopener noreferrer">https://testnet.snowtrace.io/address/0xB3793af97Ef6BDF7b794F1Ed22B7A8bd056706C7</a></p><p><strong>Stake</strong>: <a href="https://testnet.snowtrace.io/address/0x1c13a59ddaDb2deaBAf488e0bBFc9254DCe59F9b" target="_blank" rel="noopener noreferrer">https://testnet.snowtrace.io/address/0x1c13a59ddaDb2deaBAf488e0bBFc9254DCe59F9b</a></p></div></div></details></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/router-protocol/docs/tree/main/docs/voyager/building-different-use-cases/crosschain-staking.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/voyager/building-different-use-cases/sequenced-transfers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Sequenced Transfers (tokens + instructions) using Voyager</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/voyager/fee-model"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Fee Model</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="margin-bottom--sm"><a class="footerLogoLink_DDai" href="/"><img src="/logo/light.svg" alt="Router Docs" class="themedImage_ToTc themedImage--light_HNdA footer__logo" height="36px"><img src="/logo/dark.svg" alt="Router Docs" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" height="36px"></a></div><div class="footer__row"><div class="footer__data"><div class="footer__cta"></div></div><div class="links"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Router Protocol</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://routerprotocol.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home</a></li><li class="footer__item"><a href="https://app.thevoyager.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Voyager</a></li><li class="footer__item"><a href="https://devnet-explorer.routerprotocol.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Explorer</a></li><li class="footer__item"><a href="https://angel.co/company/router-protocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://routerprotocol.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ecosystem</a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.routerprotocol.com/whitepaper" target="_blank" rel="noopener noreferrer" class="footer__link-item">Whitepaper</a></li><li class="footer__item"><a class="footer__link-item" href="/router-core">Developer Portal</a></li><li class="footer__item"><a href="https://github.com/router-protocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://routerprotocol.medium.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li><li class="footer__item"><a href="https://forum.routerprotocol.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community</a></li></ul></div><div class="col footer__col"><div class="footer__title">Socials</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/routerprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://t.me/routerprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li><li class="footer__item"><a href="https://discord.com/invite/yjM2fUUHvN" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC3ST1tToUIjA7swKO4g5Uxw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/router-protocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li></ul></div></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © Router Protocol since 2022. All rights reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.52b8b31d.js"></script>
<script src="/assets/js/main.78be23a3.js"></script>
</body>
</html>