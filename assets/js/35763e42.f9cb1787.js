"use strict";(self.webpackChunkrouter_docs=self.webpackChunkrouter_docs||[]).push([[2571],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(r),h=o,m=p["".concat(l,".").concat(h)]||p[h]||d[h]||a;return r?n.createElement(m,i(i({ref:t},c),{},{components:r})):n.createElement(m,i({ref:t},c))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var u=2;u<a;u++)i[u]=r[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},60524:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var n=r(87462),o=(r(67294),r(3905));const a={title:"Configure and Run Orchestrator",sidebar_position:3},i=void 0,s={unversionedId:"running-a-validator/on-devnet/configure-run-orchestrator",id:"running-a-validator/on-devnet/configure-run-orchestrator",title:"Configure and Run Orchestrator",description:"Step 0) Run validator node before running orchestrator",source:"@site/docs/validators/running-a-validator/on-devnet/configure-run-orchestrator.md",sourceDirName:"running-a-validator/on-devnet",slug:"/running-a-validator/on-devnet/configure-run-orchestrator",permalink:"/validators/running-a-validator/on-devnet/configure-run-orchestrator",draft:!1,editUrl:"https://github.com/router-protocol/docs/tree/main/docs/validators/running-a-validator/on-devnet/configure-run-orchestrator.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Configure and Run Orchestrator",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Becoming a Validator",permalink:"/validators/running-a-validator/on-devnet/becoming-validator"},next:{title:"On Testnet",permalink:"/validators/running-a-validator/on-testnet/"}},l={},u=[{value:"Cosmos Keys",id:"cosmos-keys",level:3},{value:"Ethereum Keys",id:"ethereum-keys",level:3}],c={toc:u};function d(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("details",null,(0,o.kt)("summary",null,(0,o.kt)("b",null,"Step 0) Run validator node before running orchestrator")),(0,o.kt)("p",null,"Follow ",(0,o.kt)("a",{parentName:"p",href:"./becoming-validator"},"this guide")," to become a validator.")),(0,o.kt)("details",null,(0,o.kt)("summary",null,(0,o.kt)("b",null,"Step 1) Configure the orchestrator")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"mkdir .router-orchestrator\ncp network-config/devnet/10001/orchestrator-config.json ~/.router-orchestrator/config.json\ncd ~/.router-orchestrator\n")),(0,o.kt)("p",null,"Update the\xa0",(0,o.kt)("inlineCode",{parentName:"p"},"chainRpc"),"\xa0in the\xa0",(0,o.kt)("inlineCode",{parentName:"p"},"config.json"),"\xa0file with a valid EVM RPC Endpoints for all the chains."),(0,o.kt)("p",null,"Orchestrator also requires access to the validator's Cosmos and Ethereum credentials to sign transactions for the corresponding networks."),(0,o.kt)("h3",{id:"cosmos-keys"},"Cosmos Keys"),(0,o.kt)("p",null,"There are two ways to provide the credential access - a keyring with encrypted keys, or just a private key in plaintext."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"1. Cosmos Keyring")),(0,o.kt)("p",null,"Update the\xa0",(0,o.kt)("inlineCode",{parentName:"p"},"cosmosPrivateKey"),"\xa0to the validator key name (or account address). Please note that the default keyring backend is\xa0",(0,o.kt)("inlineCode",{parentName:"p"},"file"),"\xa0and it will try to locate the keys on the disk."),(0,o.kt)("p",null,"The keyring path must be pointing to homedir of the routerd node, in case keys needs to be reused from there."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"2. Cosmos Private Key (Unsafe)")),(0,o.kt)("p",null,"Simply update the\xa0",(0,o.kt)("inlineCode",{parentName:"p"},"cosmosPrivateKey"),"\xa0with Validator's Account private key."),(0,o.kt)("p",null,"To obtain the validator's Cosmos private key, run\xa0",(0,o.kt)("inlineCode",{parentName:"p"},"routerd keys unsafe-export-eth-key $VALIDATOR_KEY_NAME"),"."),(0,o.kt)("h3",{id:"ethereum-keys"},"Ethereum Keys"),(0,o.kt)("p",null,"To provide the credential access, a private key in plaintext needs to be provided."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Ethereum Private Key (Unsafe)")),(0,o.kt)("p",null,"Simply update the\xa0",(0,o.kt)("inlineCode",{parentName:"p"},"ethPrivateKey"),"\xa0with a new Ethereum Private Key from a new account."),(0,o.kt)("p",null,"Then ensure that the Ethereum addresss has balance for all the configured EVM chains. ")),(0,o.kt)("details",null,(0,o.kt)("summary",null,(0,o.kt)("b",null,"Step 2) Register the Ethereum Address")),(0,o.kt)("p",null,"Submit ",(0,o.kt)("inlineCode",{parentName:"p"},"set-orchestrator-address")," tx to Routerchain with ",(0,o.kt)("strong",{parentName:"p"},"orchestrator-router-address")," and ",(0,o.kt)("strong",{parentName:"p"},"orchestrator-eth-address.")," "),(0,o.kt)("p",null,"This tx will register the orchestrator addresses on Routerchain"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"routerd tx attestation set-orchestrator-address [orchestrator-router-address] [orchestrator-eth-address]\n\nExample: routerd tx attestation set-orchestrator-address router1emlu0gy7hju5pywvmkhy529f7s24ydtm49pwcl 0x1E5B81378a1D484169aB9b133FFD97003316e840 --from my-node --home ~/.routerd --keyring-backend file --chain-id router-1  --fees 100000000000000route\n")),(0,o.kt)("p",null,"Successful registration can be verified by checking for Validator's mapped Ethereum address on\xa0",(0,o.kt)("a",{parentName:"p",href:"https://devnet.lcd.routerprotocol.com/router-protocol/router-chain/attestation/list_orchestrators"},"list of orchestrators"),".")),(0,o.kt)("details",null,(0,o.kt)("summary",null,(0,o.kt)("b",null,"Step 3) Start the Orchestrator")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"cd ~/.router-orchestrator\nrouter-orchestrator start --reset --config ~/.router-orchestrator/config.json\n")),(0,o.kt)("p",null,"This will start the Orchestrator.")))}d.isMDXComponent=!0}}]);