"use strict";(self.webpackChunkrouter_docs=self.webpackChunkrouter_docs||[]).push([[4510],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>m});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(t),m=a,g=d["".concat(s,".").concat(m)]||d[m]||p[m]||i;return t?r.createElement(g,l(l({ref:n},c),{},{components:t})):r.createElement(g,l({ref:n},c))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,l=new Array(i);l[0]=d;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var u=2;u<i;u++)l[u]=t[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},89282:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var r=t(87462),a=(t(67294),t(3905));const i={title:"Relayer Guide",sidebar_position:2},l="Relayer Guide",o={unversionedId:"relayer/relayer-guide",id:"relayer/relayer-guide",title:"Relayer Guide",description:"Steps involved in running a relayer",source:"@site/docs/infra/relayer/relayer-guide.md",sourceDirName:"relayer",slug:"/relayer/relayer-guide",permalink:"/infra/relayer/relayer-guide",draft:!1,editUrl:"https://github.com/router-protocol/docs/tree/main/docs/infra/relayer/relayer-guide.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Relayer Guide",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/infra/relayer/"}},s={},u=[{value:"Minimum Requirements",id:"minimum-requirements",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Setup Relayer",id:"setup-relayer",level:2},{value:"Step 1) Setup configuration for the relayer",id:"step-1-setup-configuration-for-the-relayer",level:3},{value:"Understanding global config",id:"understanding-global-config",level:4},{value:"Understanding chain config",id:"understanding-chain-config",level:4},{value:"Step 2) Run the relayer",id:"step-2-run-the-relayer",level:3}],c={toc:u};function p(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"relayer-guide"},"Relayer Guide"),(0,a.kt)("p",null,"Steps involved in running a relayer"),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"The following information is based off of ",(0,a.kt)("a",{parentName:"em",href:"https://github.com/clemensgg/RELAYER-dev-crew/blob/main/HERMES/omniflix/relayer-doc.md"},"this guide")," created by Clemens from CryptoCrew.")),(0,a.kt)("h2",{id:"minimum-requirements"},"Minimum Requirements"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"8-core (4 physical core), x86_64 architecture processor"),(0,a.kt)("li",{parentName:"ul"},"32 GB RAM (or equivalent swap file set up)"),(0,a.kt)("li",{parentName:"ul"},"1TB+ nVME drives")),(0,a.kt)("p",null,"If running many nodes on a single VM, ",(0,a.kt)("a",{parentName:"p",href:"https://tecadmin.net/increase-open-files-limit-ubuntu/"},"ensure your open files limit is increased")),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Latest go-version ",(0,a.kt)("a",{parentName:"li",href:"https://golang.org/doc/install"},"https://golang.org/doc/install")),(0,a.kt)("li",{parentName:"ul"},"Ensure you have a Router chain instance running instance running for the environment you want to setup the relayer for. In case you want to run the relayer for your local, follow ",(0,a.kt)("a",{parentName:"li",href:"../../router-core/running-router-chain-locally"},"this guide")," to setup Router chain locally."),(0,a.kt)("li",{parentName:"ul"},"Reliable RPCs for supporting networks")),(0,a.kt)("h2",{id:"setup-relayer"},"Setup Relayer"),(0,a.kt)("h3",{id:"step-1-setup-configuration-for-the-relayer"},"Step 1) Setup configuration for the relayer"),(0,a.kt)("p",null,"In the ",(0,a.kt)("inlineCode",{parentName:"p"},"root")," folder, a sample config file ",(0,a.kt)("inlineCode",{parentName:"p"},"config.example.json")," has been provided."),(0,a.kt)("details",null,(0,a.kt)("summary",null,(0,a.kt)("b",null,"Full Config File")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'{\n  "global": {  //Global relayer config\n    "dbPath": "txq.db",  //Transaction queue database path; default:txq.db\n    "environment": "development", //Relayer running environment; default:development\n    "watcherTimer": 80, //Watcher service polling time in secs; default:60\n    "pollingTimer": 60, //Listener service polling time in secs; default:60\n    "reset": "false", //Database reset on start of relayer service; default:false\n    "routerRelayerAddress": "RELAYER_ADDRESS", //Relayer router chain address; default:""\n    "routerchainEnv": "devnet" //Router chain connection environment; default:local\n  },\n  "chains": { //Chain related config \n    "7545": {\n      "name": "ganache1", //Chain Name\n      "rpc": "RPC_1", // RPC\n      "gasLimit": 9000000, \n      "maxGasPrice": 10000000000,\n      "key": "PRIVATE_KEY"\n    },\n    "8545": {\n      "name": "ganache2",\n      "rpc": "RPC_2",\n      "gasLimit": 9000000,\n      "maxGasPrice": 10000000000,\n      "key": "PRIVATE_KEY"\n    },\n    "43113":{\n      "name": "Fuji",\n      "rpc": "RPC_3",\n      "gasLimit": 9000000,\n      "maxGasPrice": 10000000000,\n      "key": "PRIVATE_KEY"\n    },\n    "80001":{\n      "name": "Mumbai",\n      "rpc": "RPC_4",\n      "gasLimit": 9000000,\n      "maxGasPrice": 10000000000,\n      "key": "PRIVATE_KEY"\n    }\n  }\n}\n'))),(0,a.kt)("h4",{id:"understanding-global-config"},"Understanding global config"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'"global": {  //Global relayer config\n  "dbPath": "txq.db",  //Transaction queue database path; default:txq.db\n  "environment": "development", //Relayer running environment; default:development\n  "watcherTimer": 80, //Watcher service polling time in secs; default:60\n  "pollingTimer": 60, //Listener service polling time in secs; default:60\n  "reset": "false", //Database reset on start of relayer service; default:false\n  "routerRelayerAddress": "RELAYER_ADDRESS", //Relayer router chain address; default:""\n  "routerchainEnv": "devnet" //Router chain connection environment; default:local\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"environment: This is the relayer running environment; specifies the verbosity for the relayer; accepted values - ",(0,a.kt)("inlineCode",{parentName:"li"},"development")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"production"),"."),(0,a.kt)("li",{parentName:"ul"},"watcherTimer: Watcher is a service for monitoring Transaction Queue DB. watcherTimer determines the polling interval for service in seconds."),(0,a.kt)("li",{parentName:"ul"},"pollingTimer: Polling Timer is for listening interval for transaction from Router chain"),(0,a.kt)("li",{parentName:"ul"},"reset: Reset is for resetting Transaction Queue DB, if ",(0,a.kt)("inlineCode",{parentName:"li"},"true")," it will reset, if ",(0,a.kt)("inlineCode",{parentName:"li"},"false")," in will not reset."),(0,a.kt)("li",{parentName:"ul"},"routerchainEnv:  routerchainEnv is router chain instance to connect with, it connects with network's gRPC and chainID; accepted values - ",(0,a.kt)("inlineCode",{parentName:"li"},"devnet")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"alpha-devnet")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"local-docker"))),(0,a.kt)("h4",{id:"understanding-chain-config"},"Understanding chain config"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'chains:[{\n  "chainId": {\n  "name": "ganache1", //Chain Name\n  "rpc": "RPC_1", // RPC\n  "gasLimit": 9000000, \n  "maxGasPrice": 10000000000,\n  "key": "PRIVATE_KEY"\n}]\n')),(0,a.kt)("p",null,"Chains config section defines parameters for each supported chain by the relayer. You can follow the same structure as given in the example and provide name, rpc, gasLimit, maxGasPrice and private key for chains you want to support."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("ol",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ol"},"Make sure that the chains mentioned in the config are supported by Router chain. Chains not supported will be ignored."),(0,a.kt)("li",{parentName:"ol"},"Ensure the wallet has funds in the respective native tokens of all the supported chains in order to pay the fees required to relay."))),(0,a.kt)("h3",{id:"step-2-run-the-relayer"},"Step 2) Run the relayer"),(0,a.kt)("details",null,(0,a.kt)("summary",null,(0,a.kt)("b",null,"Run Directly")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Clone the ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/router-protocol/router-relayer.git"},"following repo"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"git clone https://github.com/router-protocol/router-relayer.git\n"))),(0,a.kt)("li",{parentName:"ol"},"Use the above mentioned details and create your config file and paste it to ",(0,a.kt)("inlineCode",{parentName:"li"},"example/cfg/config.json")),(0,a.kt)("li",{parentName:"ol"},"Run the relayer",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"cd router-relayer\ncd example\ngo run main.go\n"))))),(0,a.kt)("details",null,(0,a.kt)("summary",null,(0,a.kt)("b",null,"Run by building binary")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Clone the ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/router-protocol/router-relayer.git"},"following repo"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"git clone https://github.com/router-protocol/router-relayer.git\n"))),(0,a.kt)("li",{parentName:"ol"},"Build the binary",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"cd router-relayer\nmake build\n")),"This will create a binary named router-relayer in GOPATH."),(0,a.kt)("li",{parentName:"ol"},"Use the above mentioned details and create your config file"),(0,a.kt)("li",{parentName:"ol"},"Run the relayer",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"router-relayer $PATH/to/config.json\n"))))),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Do not use your relaying-addresses for anything else because it will lead to account nonce sequence errors.")))}p.isMDXComponent=!0}}]);