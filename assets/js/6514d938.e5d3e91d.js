"use strict";(self.webpackChunkrouter_docs=self.webpackChunkrouter_docs||[]).push([[4792],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),h=u(n),m=a,p=h["".concat(s,".").concat(m)]||h[m]||d[m]||o;return n?r.createElement(p,i(i({ref:t},l),{},{components:n})):r.createElement(p,i({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},72366:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>u});var r=n(87462),a=(n(67294),n(3905));const o={title:"Functions on third-party chain's contract",sidebar_position:3},i=void 0,c={unversionedId:"understanding-omnichain-framework/third-party-chain-contracts",id:"understanding-omnichain-framework/third-party-chain-contracts",title:"Functions on third-party chain's contract",description:"Router\u2019s Gateway contracts have a function named\xa0requestToRouter that facilitates the transmission of a cross-chain request to the middleware contract on the Router Chain. Whenever users want to execute a cross-chain request, they can call this function by passing the payload to be transferred from the source to the Router chain.",source:"@site/docs/omnichain-framework/understanding-omnichain-framework/third-party-chain-contracts.md",sourceDirName:"understanding-omnichain-framework",slug:"/understanding-omnichain-framework/third-party-chain-contracts",permalink:"/omnichain-framework/understanding-omnichain-framework/third-party-chain-contracts",draft:!1,editUrl:"https://github.com/router-protocol/docs/tree/main/docs/omnichain-framework/understanding-omnichain-framework/third-party-chain-contracts.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Functions on third-party chain's contract",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Understanding the Functions",permalink:"/omnichain-framework/understanding-omnichain-framework/understanding-functions"},next:{title:"Functions on Router chain's middleware contract",permalink:"/omnichain-framework/understanding-omnichain-framework/router-chain-middleware-contract/"}},s={},u=[{value:"requestToRouter Function:",id:"requesttorouter-function",level:3},{value:"handleRequestFromRouter Function:",id:"handlerequestfromrouter-function",level:3}],l={toc:u};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Router\u2019s Gateway contracts have a function named\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"requestToRouter")," that facilitates the transmission of a cross-chain request to the middleware contract on the Router Chain. Whenever users want to execute a cross-chain request, they can call this function by passing the payload to be transferred from the source to the Router chain."),(0,a.kt)("p",null,"In addition to calling the aforementioned function, the recipient contract on the destination chain will also have to implement the function ",(0,a.kt)("inlineCode",{parentName:"p"},"handleRequestFromRouter")," to handle the requests received from the middleware contract."),(0,a.kt)("h3",{id:"requesttorouter-function"},"requestToRouter Function:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"function requestToRouter(\n    bytes memory payload, \n    string memory routerBridgeContract,\n    uint64 gasLimit,\n    address feePayer\n) external returns (uint64)\n")),(0,a.kt)("p",null,"This is a function on the Router\u2019s Gateway contracts. This function creates a request to send a payload to the middleware contract on the Router Chain. It takes the following arguments: "),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"payload:")," The payload to be sent. It should be in bytes format. You can send anything as a payload and handle it accordingly on the middleware."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"routerBridgeContract:")," Address of your middleware contract on the Router Chain."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"gasLimit:")," The gas limit required to execute the request on the Router chain."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"feePayer:")," Address on the Router chain from which the cross-chain fee will be deducted. It can be either one of the three: (a) the user address, (b) the application contract address, or (c) ",(0,a.kt)("inlineCode",{parentName:"li"},"NONE"),". If the ",(0,a.kt)("inlineCode",{parentName:"li"},"feePayer")," address is set to ",(0,a.kt)("inlineCode",{parentName:"li"},"NONE"),", then any entity on the Router chain can act as the feePayer. ")),(0,a.kt)("p",null,"This function returns a nonce that serves as an identifier to your call to the Gateway contract. In this way, one can create a request to interact with the middleware contract on the Router Chain."),(0,a.kt)("h3",{id:"handlerequestfromrouter-function"},"handleRequestFromRouter Function:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"function handleRequestFromRouter(string memory sender, bytes memory payload) external\n")),(0,a.kt)("p",null,"This function needs to be implemented into the recipient smart contract on the destination chain. This function is responsible for handling the requests received from the middleware contract on the Router Chain. "),(0,a.kt)("p",null,"This function should only be called by the Router\u2019s Gateway contract. Make sure to check that the msg sender is the Gateway contract address. Also, make sure that only your middleware contract can send the request by checking it with the address of the sender received in the parameters of the function"),(0,a.kt)("p",null,"This function takes two arguments:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"sender:")," Address of the middleware contract on the Router Chain which sent the request."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"payload:")," The payload comes from the middleware contract.")))}d.isMDXComponent=!0}}]);