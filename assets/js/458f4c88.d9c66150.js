"use strict";(self.webpackChunkrouter_docs=self.webpackChunkrouter_docs||[]).push([[5556],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),c=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(a),m=n,k=u["".concat(s,".").concat(m)]||u[m]||p[m]||o;return a?r.createElement(k,i(i({ref:t},d),{},{components:a})):r.createElement(k,i({ref:t},d))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var c=2;c<o;c++)i[c]=a[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},40420:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=a(87462),n=(a(67294),a(3905));const o={title:"Step 2) Setup a Validator Account",sidebar_position:2},i=void 0,l={unversionedId:"running-a-validator/on-mainnet/setup-a-validator-account",id:"running-a-validator/on-mainnet/setup-a-validator-account",title:"Step 2) Setup a Validator Account",description:"Before creating a validator account, make sure you are running a Sentry node with the chain synced to the latest block as specified in this step.",source:"@site/docs/validators/running-a-validator/on-mainnet/setup-a-validator-account.md",sourceDirName:"running-a-validator/on-mainnet",slug:"/running-a-validator/on-mainnet/setup-a-validator-account",permalink:"/validators/running-a-validator/on-mainnet/setup-a-validator-account",draft:!1,editUrl:"https://github.com/router-protocol/docs/tree/main/docs/validators/running-a-validator/on-mainnet/setup-a-validator-account.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Step 2) Setup a Validator Account",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Step 1) Run a Sentry Node",permalink:"/validators/running-a-validator/on-mainnet/run-a-sentry-node"},next:{title:"Delegating ROUTE Tokens to Participate in Staking",permalink:"/validators/delegating-route-tokens"}},s={},c=[{value:"Setup validator",id:"setup-validator",level:3},{value:"Setup Orchestrator",id:"setup-orchestrator",level:3},{value:"Add config.json for Orchestrator",id:"add-configjson-for-orchestrator",level:3},{value:"Start Validator and Orchestrator",id:"start-validator-and-orchestrator",level:3},{value:"Check validator and orchestrator status",id:"check-validator-and-orchestrator-status",level:3}],d={toc:c};function p(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Before creating a validator account, make sure you are running a Sentry node with the chain synced to the latest block as specified in this ",(0,n.kt)("a",{parentName:"p",href:"./run-a-sentry-node"},"step"),". "),(0,n.kt)("h3",{id:"setup-validator"},"Setup validator"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Create validator account"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'export VALIDATOR_KEY_NAME="my-validator-name"\nrouterd keys add $VALIDATOR_KEY_NAME --chain-id router_9600-1 --keyring-backend file\n'))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Copy routerd address"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"routerd keys show $VALIDATOR_KEY_NAME -a --keyring-backend file\nexport VALIDATOR_ADDRESS=<routerd-address>\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Fund routerd address with some $ROUTE tokens and check balance"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"routerd q bank balances $VALIDATOR_ADDRESS --chain-id router_9600-1 --keyring-backend file\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Create validator: Initialize new validator with self delegation of $ROUTE tokens."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'   export VALIDATOR_MONIKER="my-validator-moniker"\n\n   routerd tx staking create-validator \\\n   --amount=1000000000000000000route \\\n   --pubkey=$(routerd tendermint show-validator) \\\n   --moniker=$VALIDATOR_MONIKER \\\n   --chain-id=router_9600-1 \\\n   --commission-rate="0.10" \\\n   --commission-max-rate="0.20" \\\n   --commission-max-change-rate="0.01" \\\n   --min-self-delegation="1000000" \\\n   --gas="auto" \\\n   --fees="100000000000000route" \\\n   --from=$VALIDATOR_KEY_NAME \\\n   --gas-adjustment=1.5 \\\n   --keyring-backend=file\n')))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"amount")," flag is the initial amount of ROUTE you're willing to bond"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"pubkey")," is the validator public key created earlier"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"moniker")," is the human readable name you choose for your validator"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"chain-id")," is the network id of the chain you are working with (in the case of Router mainnet: ",(0,n.kt)("inlineCode",{parentName:"li"},"router_9600-1"),")"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"commission-rate")," is the initial commission rate you will charge your delegates "),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"commission-max-rate")," is the highest rate you are allowed to charge your delegates"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"commission-max-change-rate")," is how much you can increase your commission rate in a 24 hour period"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"min-self-delegation")," is the lowest amount of personal funds the validator is required to have in their validator to stay bonded"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"from")," flag is the KEY_NAME you created while initializing the key on your keyring")),(0,n.kt)("ol",{start:5},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Verify validator status"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"routerd q staking validator $VALIDATOR_ADDRESS --chain-id router_9600-1 --keyring-backend file\n")))),(0,n.kt)("p",null,"If you see your validator in the list of validators, then congratulations, you have officially joined the Router mainnet as a staking validator! \ud83c\udf89"),(0,n.kt)("p",null,"After setting up the validator, immediately proceed to setup the orchestrator. This is a necessary step in order to prevent the validator from being slashed."),(0,n.kt)("h3",{id:"setup-orchestrator"},"Setup Orchestrator"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Create orchestrator account"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'export ORCHESTRATOR_KEY_NAME="my-orchestrator-name"\nrouterd keys add $ORCHESTRATOR_KEY_NAME --chain-id router_9600-1 --keyring-backend file\n')),(0,n.kt)("p",{parentName:"li"},"get Orchestrator address"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"routerd keys show $ORCHESTRATOR_KEY_NAME -a --keyring-backend file\nexport ORCHESTRATOR_ADDRESS=<routerd-address>\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Get funds to orchestrator account, check balance after getting funds"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"routerd q bank balances $ORCHESTRATOR_ADDRESS --chain-id router_9600-1 --keyring-backend file\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Map orchestrator address to validator address."),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"EVM-KEY-FOR-SIGNING-TXNS")," is the public ethereum address. You can create one in Metamask, it doesnt need to have funds. We use it to sign transactions on EVM chains. Make sure to save the private key of this address somewhere safe."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"export EVM_ADDRESS_FOR_SIGNING_TXNS=<EVM-ADDRESS-FOR-SIGNING-TXNS>\nrouterd tx attestation set-orchestrator-address $ORCHESTRATOR_ADDRESS $EVM_ADDRESS_FOR_SIGNING_TXNS --from my-validator-key \\\n--chain-id router_9600-1 \\\n--fees 1000000000000000route \\\n--keyring-backend file\n")))),(0,n.kt)("h3",{id:"add-configjson-for-orchestrator"},"Add config.json for Orchestrator"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'   {\n      "chains": [\n         {\n            "chainId": "137",\n            "chainType": "CHAIN_TYPE_EVM",\n            "chainName": "Polygon",\n            "chainRpc": "www.polygon-rpc.com",\n            "blocksToSearch": 1000,\n            "blockTime": "5s"\n         }\n      ],\n      "globalConfig": {\n         "logLevel": "debug",\n         "networkType": "mainnet",\n         "dbPath": "orchestrator.db",\n         "batchSize": 25,\n         "batchWaitTime": 4,\n         "routerChainTmRpc": "http://0.0.0.0:26657",\n         "routerChainGRpc": "tcp://0.0.0.0:9090",\n         "evmAddress": "",\n         "cosmosAddress": "",\n         "ethPrivateKey": "",\n         "cosmosPrivateKey": ""\n      }\n   }\n')),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"routerChainTmRpc")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"routerChainGRpc"),", point it to your validator IP"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"cosmosAddress")," is Router address of orchestrator // router5678abcd"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"cosmosPrivateKey")," is private key for your orchestrator cosmos address (private key of above ",(0,n.kt)("inlineCode",{parentName:"li"},"cosmosAddress"),")"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"evmAddress")," is EVM address of orchestrator which created in above step in Metamask //0x1234abcd"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"ethPrivateKey")," is private key for the the above ",(0,n.kt)("inlineCode",{parentName:"li"},"evmAddress")," wallet you created"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"loglevel"),' currently kept it as "debug" can be set as "info" evmAddress is EVM address of orchestrator //0x1234abcd')),(0,n.kt)("h3",{id:"start-validator-and-orchestrator"},"Start Validator and Orchestrator"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Start validator"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl start cosmovisor.service\nsudo systemctl status cosmovisor.service\n\n# check logs\njournalctl -u cosmovisor -f\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Start orchestrator"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl start orchestrator.service\nsudo systemctl status orchestrator.service\n\n# check logs\njournalctl -u orchestrator -f\n")))),(0,n.kt)("h3",{id:"check-validator-and-orchestrator-status"},"Check validator and orchestrator status"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Check if node is syncing, make sure it is not stuck at some block height"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"routerd status | jq .SyncInfo.latest_block_height\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Check if orchestrator health is ok"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curl localhost:8001/health\n")))))}p.isMDXComponent=!0}}]);